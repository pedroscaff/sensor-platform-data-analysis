
import uniqId from '../uniqId';

/**
 * Menu of options with one possible selected item in same time
 * @class
 * @extends external:H.ui.Control
 */
class Select extends H.ui.Control {
    /**
     * @param {Object} values - object where property name is value and property value is label
     */
    constructor(values) {
        super();
        this.values = values;
    }
    renderInternal(el) {
        let name = uniqId();
        this.addClass('dl-select');
        el.innerHTML = `<div class="dl-select__title">Select one</div><div class="dl-select__options">${Object.keys(
            this.values
        ).map((value) => {
            const title = this.values[value];
            const id = 'dl-select-' + value;
            return `<div class="dl-select__option">
                <input
                    class="dl-select__input"
                    type="radio"
                    name="${name}"
                    id="${id}"
                    value="${value}"
                />
                <label
                    class="dl-select__label"
                    for="${id}"
                >${title}</label>
            </div>`
        }).join('')}</div>`;
        el.addEventListener(
            'change', () => {
                this.dispatchEvent('change');
            }
        );
    }
    /**
     * @returns {string} value
     */
    getValue() {
        const inputs = this.getElement().querySelectorAll(
            'input[type=radio]:checked'
        );
        return inputs[0] && inputs[0].value;
    }
}

export default Select;
