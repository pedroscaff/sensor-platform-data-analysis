"use strict";!function(){var queries={query:{fileName:"./query.json",dataset:"912123cbf895457692acddc51050bd0f",id:"e02e56c4e2294653948a7949724d6715"}},query=queries.query,platform=new H.service.Platform({app_id:"in2pu7pura4wetagevAb",app_code:"py5JthxGeTnFXDNPQEIiRA",useCIT:!0,useHTTPS:!0}),pixelRatio=devicePixelRatio>1?2:1,defaultLayers=platform.createDefaultLayers({tileSize:256*pixelRatio}),map=new H.Map(document.getElementsByClassName("dl-map")[0],defaultLayers.normal.basenight,{pixelRatio:pixelRatio});window.addEventListener("resize",function(){map.getViewPort().resize()}),new H.mapevents.Behavior(new H.mapevents.MapEvents(map));var service=(H.ui.UI.createDefault(map,defaultLayers),platform.configure(new H.datalens.Service));service.fetchQueryStats(query.id,{stats:[{column_stats:{co2_ppm:["$min","$max","$average"],lat_avg:["$min","$max"],lon_avg:["$min","$max"]},dynamic:{x:"$drop",y:"$drop",z:15}}]}).then(function(_ref){var stats=_ref.stats,columnStats=stats[0].column_stats;map.setViewBounds(new H.geo.Rect(columnStats.lat_avg.$max,columnStats.lon_avg.$min,columnStats.lat_avg.$min,columnStats.lon_avg.$max),!1);var colors=["rgb(158, 1, 66)","rgb(238, 100, 69)","rgb(250, 177, 88)","rgb(243, 250, 173)","rgb(199, 250, 173)","rgb(152, 213, 163)","rgb(92, 183, 169)"],bandwidth=[{value:.5,zoom:4},{value:4,zoom:17}],provider=new H.datalens.QueryTileProvider(service,{queryId:query.id,tileParamNames:{x:"x",y:"y",z:"z"}}),layer=new H.datalens.HeatmapLayer(provider,{rowToTilePoint:function(row){return{x:row.tx,y:row.ty,value:row.co2_ppm,count:row.count}},bandwidth:bandwidth,aggregation:H.datalens.HeatmapLayer.Aggregation.AVERAGE,valueRange:[100,600],colorScale:d3.scaleQuantize().domain([0,1]).range(colors),inputScale:H.datalens.HeatmapLayer.InputScale.LINEAR});map.addLayer(layer)})}();
